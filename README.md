# Service Courier (pet-project)

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –∫—É—Ä—å–µ—Ä–æ–≤, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –≤ —Ä–∞–º–∫–∞—Ö –∫—É—Ä—Å–∞ **Avito: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–∞ Go**.  
–°–µ—Ä–≤–∏—Å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—å–µ—Ä–∞–º–∏ –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ (–≤—Ä—É—á–Ω—É—é –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º HTTP, gRPC –∏ Kafka.

–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å —É–ø–æ—Ä–æ–º –Ω–∞ production-–ø–æ–¥—Ö–æ–¥: –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, observability, –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∏ CI/CD.

---

## üí° –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### –ö—É—Ä—å–µ—Ä—ã
- CRUD API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—É—Ä—å–µ—Ä–∞–º–∏
- –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ PostgreSQL
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—É—Ä—å–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ ticker

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤
- –†—É—á–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ —á–µ—Ä–µ–∑ HTTP
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
  - —á–µ—Ä–µ–∑ Kafka
  - –ø–æ —Ç–∞–π–º–µ—Ä—É (ticker) —á–µ—Ä–µ–∑ gRPC-–∑–∞–ø—Ä–æ—Å—ã –≤ —Å–µ—Ä–≤–∏—Å –∑–∞–∫–∞–∑–æ–≤ (https://github.com/Avito-courses/service-order)

### Middleware –¥–ª—è HTTP –∏ Interceptors –¥–ª—è gRPC
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã Retry-–º–µ—Ö–∞–Ω–∏–∑–º—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –≤–Ω–µ—à–Ω–∏—Ö –≤—ã–∑–æ–≤–æ–≤, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–µ—Ç—Ä–∏–∫–∏, –∞ —Ç–∞–∫–∂–µ rate-limiter —á–µ—Ä–µ–∑ bucket.

---

## üèéÔ∏è –ó–∞–ø—É—Å–∫

–í –ø—Ä–æ–µ–∫—Ç–µ –µ—Å—Ç—å `Dockerfile` –∏ `docker-compose.yml`, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ —Å–±–∏–ª–¥–∏—Ç—å –∏ –ø–æ–¥–Ω—è—Ç—å —Å–µ—Ä–≤–∏—Å.
–ö–æ–º–∞–Ω–¥–∞: `docker compose up -d`

–ù–æ —Å–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ –ø–æ–¥–Ω—è—Ç—å –∏–Ω—Ñ—Ä–æ—Å—Ç—Ä—É–∫—Ç—É –ø—Ä–æ–µ–∫—Ç–∞ `test-infrastructure/docker-compose.yml` –∏ [—Å–µ—Ä–≤–∏—Å –∑–∞–∫–∞–∑–æ–≤](https://github.com/Avito-courses/service-order).

–¢–∞–∫–∂–µ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É –≤–æ–∑–º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø–æ—Ä—Ç –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ —á–µ—Ä–µ–∑ —Ñ–ª–∞–≥ `--port` (PORT –≤ `.env` –±—É–¥–µ—Ç –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è):

`go run "/cmd/service_courier/service_courier.go" --port 3000`

---

## –û–∫—Ä—É–∂–µ–Ω–∏–µ

–î–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ `.env`, –ø—Ä–∏–º–µ—Ä –µ–≥–æ —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –µ—Å—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, —Ñ–∞–π–ª `.env.example`.

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- Handler / Service / Repository
- PostgreSQL –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- –ú–∏–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ **goose**
- Kafka –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ env
- Graceful shutdown –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

---

## Observability

- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏
- –ú–µ—Ç—Ä–∏–∫–∏ Prometheus
- Middleware –¥–ª—è HTTP –∏ gRPC –º–µ—Ç—Ä–∏–∫
- pprof-—Ä—É—á–∫–∏ –¥–ª—è –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- Unit-—Ç–µ—Å—Ç—ã
- Mock-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
–ë—ã–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –ø–∞–∫–µ—Ç `testcontainers-go` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å PostgreSQL.

---

## CI/CD

- GitHub Actions
- –°–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç—ã
- golangci-lint
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ push –∏ PR

---

## –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- Go
- PostgreSQL
- gRPC
- Kafka
- Prometheus
- Docker
- Testcontainers
- Goose
- GitHub Actions
- golangci-lint
- pprof

---

![–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç](docs/–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç.png)